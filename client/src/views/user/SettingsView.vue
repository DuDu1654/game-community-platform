<!-- client/src/views/user/SettingsView.vue -->
<template>
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="mb-8">
      <h1 class="text-3xl font-bold text-gray-900 mb-2">è´¦å·è®¾ç½®</h1>
      <p class="text-gray-600">ç®¡ç†æ‚¨çš„è´¦å·ä¿¡æ¯å’Œéšç§è®¾ç½®</p>
    </div>
    
    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
      <!-- è®¾ç½®é€‰é¡¹å¡ -->
      <div class="border-b border-gray-200">
        <nav class="flex -mb-px">
          <button v-for="tab in tabs" 
                  :key="tab.id"
                  @click="activeTab = tab.id"
                  :class="[
                    'px-6 py-4 text-sm font-medium border-b-2 transition-colors',
                    activeTab === tab.id
                      ? 'border-blue-500 text-blue-600'
                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
                  ]">
            <span class="mr-2">{{ tab.icon }}</span>
            {{ tab.name }}
          </button>
        </nav>
      </div>
      
      <!-- è´¦æˆ·è®¾ç½® -->
      <div v-if="activeTab === 'account'" class="p-6">
        <div class="space-y-8">
          <!-- åŸºæœ¬ä¿¡æ¯ -->
          <div>
            <h3 class="text-lg font-semibold text-gray-800 mb-4">åŸºæœ¬ä¿¡æ¯</h3>
            <div class="space-y-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">å¤´åƒ</label>
                <div class="flex items-center">
                  <div class="w-16 h-16 rounded-full bg-gradient-to-r from-blue-100 to-purple-100 flex items-center justify-center mr-4">
                    <span class="text-2xl">ğŸ‘¤</span>
                  </div>
                  <div>
                    <button class="px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors">
                      æ›´æ¢å¤´åƒ
                    </button>
                    <p class="text-xs text-gray-500 mt-1">æ”¯æŒ JPGã€PNG æ ¼å¼ï¼Œå¤§å°ä¸è¶…è¿‡ 5MB</p>
                  </div>
                </div>
              </div>
              
              <div>
                <label for="username" class="block text-sm font-medium text-gray-700 mb-1">ç”¨æˆ·å</label>
                <input type="text" id="username" 
                       class="w-full max-w-md px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 transition-colors"
                       placeholder="è¯·è¾“å…¥ç”¨æˆ·å"
                       value="user123">
                <p class="text-xs text-gray-500 mt-1">ç”¨æˆ·åç”¨äºç¤¾åŒºæ˜¾ç¤ºï¼Œä¿®æ”¹åéœ€è¦é‡æ–°ç™»å½•</p>
              </div>
              
              <div>
                <label for="bio" class="block text-sm font-medium text-gray-700 mb-1">ä¸ªäººç®€ä»‹</label>
                <textarea id="bio" rows="3"
                          class="w-full max-w-md px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 transition-colors"
                          placeholder="ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±...">è¿™ä¸ªäººå¾ˆæ‡’ï¼Œè¿˜æ²¡æœ‰å†™ç®€ä»‹...</textarea>
              </div>
            </div>
          </div>
          
          <!-- è”ç³»ä¿¡æ¯ -->
          <div>
            <h3 class="text-lg font-semibold text-gray-800 mb-4">è”ç³»ä¿¡æ¯</h3>
            <div class="space-y-4">
              <div>
                <label for="email" class="block text-sm font-medium text-gray-700 mb-1">é‚®ç®±åœ°å€</label>
                <div class="flex items-center">
                  <input type="email" id="email" 
                         class="flex-1 max-w-md px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 transition-colors"
                         value="user@example.com"
                         disabled>
                  <span class="ml-3 px-2 py-1 bg-green-100 text-green-600 text-xs font-medium rounded-full">å·²éªŒè¯</span>
                </div>
              </div>
              
              <div>
                <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">æ‰‹æœºå·ç </label>
                <input type="tel" id="phone" 
                       class="w-full max-w-md px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 transition-colors"
                       placeholder="è¯·è¾“å…¥æ‰‹æœºå·ç ">
              </div>
            </div>
          </div>
          
          <!-- ä¿å­˜æŒ‰é’® -->
          <div class="pt-4">
            <button class="px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors">
              ä¿å­˜æ›´æ”¹
            </button>
          </div>
        </div>
      </div>
      
      <!-- éšç§è®¾ç½® -->
      <div v-if="activeTab === 'privacy'" class="p-6">
        <div class="space-y-8">
          <div>
            <h3 class="text-lg font-semibold text-gray-800 mb-4">éšç§è®¾ç½®</h3>
            <div class="space-y-4">
              <div v-for="setting in privacySettings" :key="setting.id" 
                   class="flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">
                <div>
                  <h4 class="font-medium text-gray-800">{{ setting.title }}</h4>
                  <p class="text-sm text-gray-600">{{ setting.description }}</p>
                </div>
                <div class="flex items-center">
                  <button :class="[
                    'relative inline-flex h-6 w-11 items-center rounded-full transition-colors',
                    setting.enabled ? 'bg-blue-600' : 'bg-gray-300'
                  ]">
                    <span :class="[
                      'inline-block h-4 w-4 transform rounded-full bg-white transition-transform',
                      setting.enabled ? 'translate-x-6' : 'translate-x-1'
                    ]"></span>
                  </button>
                </div>
              </div>
            </div>
          </div>
          
          <!-- æ•°æ®å¯¼å‡º -->
          <div>
            <h3 class="text-lg font-semibold text-gray-800 mb-4">æ•°æ®ç®¡ç†</h3>
            <div class="p-4 border border-gray-200 rounded-lg">
              <div class="flex items-start">
                <div class="flex-shrink-0 mr-4">
                  <span class="text-2xl">ğŸ“¥</span>
                </div>
                <div>
                  <h4 class="font-medium text-gray-800 mb-2">å¯¼å‡ºä¸ªäººæ•°æ®</h4>
                  <p class="text-sm text-gray-600 mb-4">å¯¼å‡ºæ‚¨åœ¨æœ¬ç«™çš„æ‰€æœ‰æ•°æ®ï¼ŒåŒ…æ‹¬å¸–å­ã€è¯„è®ºã€ä¸ªäººä¿¡æ¯ç­‰</p>
                  <button class="px-4 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors">
                    è¯·æ±‚æ•°æ®å¯¼å‡º
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- å®‰å…¨è®¾ç½® -->
      <div v-if="activeTab === 'security'" class="p-6">
        <div class="space-y-8">
          <div>
            <h3 class="text-lg font-semibold text-gray-800 mb-4">å¯†ç ä¸å®‰å…¨</h3>
            <div class="space-y-4">
              <div>
                <label for="currentPassword" class="block text-sm font-medium text-gray-700 mb-1">å½“å‰å¯†ç </label>
                <input type="password" id="currentPassword" 
                       class="w-full max-w-md px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 transition-colors"
                       placeholder="è¯·è¾“å…¥å½“å‰å¯†ç ">
              </div>
              
              <div>
                <label for="newPassword" class="block text-sm font-medium text-gray-700 mb-1">æ–°å¯†ç </label>
                <input type="password" id="newPassword" 
                       class="w-full max-w-md px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 transition-colors"
                       placeholder="è¯·è¾“å…¥æ–°å¯†ç ">
                <p class="text-xs text-gray-500 mt-1">å¯†ç è‡³å°‘8ä½ï¼ŒåŒ…å«å­—æ¯å’Œæ•°å­—</p>
              </div>
              
              <div>
                <label for="confirmPassword" class="block text-sm font-medium text-gray-700 mb-1">ç¡®è®¤æ–°å¯†ç </label>
                <input type="password" id="confirmPassword" 
                       class="w-full max-w-md px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 transition-colors"
                       placeholder="è¯·å†æ¬¡è¾“å…¥æ–°å¯†ç ">
              </div>
              
              <button class="px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors">
                ä¿®æ”¹å¯†ç 
              </button>
            </div>
          </div>
          
          <!-- ç™»å½•è®°å½• -->
          <div>
            <h3 class="text-lg font-semibold text-gray-800 mb-4">ç™»å½•è®°å½•</h3>
            <div class="space-y-3">
              <div v-for="session in loginSessions" :key="session.id" 
                   class="flex items-center justify-between p-3 border border-gray-200 rounded-lg">
                <div>
                  <p class="font-medium text-gray-800">{{ session.device }}</p>
                  <p class="text-sm text-gray-600">{{ session.location }} â€¢ {{ session.time }}</p>
                </div>
                <span v-if="session.current" class="px-2 py-1 bg-green-100 text-green-600 text-xs font-medium rounded-full">
                  å½“å‰è®¾å¤‡
                </span>
                <button v-else class="text-red-600 text-sm hover:text-red-800 transition-colors">
                  é€€å‡ºç™»å½•
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- é€šçŸ¥è®¾ç½® -->
      <div v-if="activeTab === 'notifications'" class="p-6">
        <div class="space-y-8">
          <div v-for="category in notificationCategories" :key="category.id">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">{{ category.name }}</h3>
            <div class="space-y-4">
              <div v-for="item in category.items" :key="item.id" 
                   class="flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">
                <div>
                  <h4 class="font-medium text-gray-800">{{ item.title }}</h4>
                  <p class="text-sm text-gray-600">{{ item.description }}</p>
                </div>
                <div class="flex items-center">
                  <button :class="[
                    'relative inline-flex h-6 w-11 items-center rounded-full transition-colors',
                    item.enabled ? 'bg-blue-600' : 'bg-gray-300'
                  ]">
                    <span :class="[
                      'inline-block h-4 w-4 transform rounded-full bg-white transition-transform',
                      item.enabled ? 'translate-x-6' : 'translate-x-1'
                    ]"></span>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'

// æ´»åŠ¨é€‰é¡¹å¡
const activeTab = ref('account')

// é€‰é¡¹å¡æ•°æ®
const tabs = ref([
  { id: 'account', name: 'è´¦æˆ·', icon: 'ğŸ‘¤' },
  { id: 'privacy', name: 'éšç§', icon: 'ğŸ”’' },
  { id: 'security', name: 'å®‰å…¨', icon: 'ğŸ›¡ï¸' },
  { id: 'notifications', name: 'é€šçŸ¥', icon: 'ğŸ””' }
])

// éšç§è®¾ç½®
const privacySettings = ref([
  { 
    id: 'profileVisibility', 
    title: 'ä¸ªäººèµ„æ–™å…¬å¼€', 
    description: 'å…è®¸å…¶ä»–ç”¨æˆ·æŸ¥çœ‹æ‚¨çš„ä¸ªäººèµ„æ–™',
    enabled: true 
  },
  { 
    id: 'onlineStatus', 
    title: 'åœ¨çº¿çŠ¶æ€æ˜¾ç¤º', 
    description: 'åœ¨ç¤¾åŒºä¸­æ˜¾ç¤ºæ‚¨çš„åœ¨çº¿çŠ¶æ€',
    enabled: true 
  },
  { 
    id: 'activityVisibility', 
    title: 'æ´»åŠ¨è®°å½•å…¬å¼€', 
    description: 'å…¬å¼€æ‚¨çš„å‘å¸–ã€è¯„è®ºç­‰æ´»åŠ¨è®°å½•',
    enabled: false 
  },
  { 
    id: 'messageFromStrangers', 
    title: 'æ¥æ”¶é™Œç”Ÿäººæ¶ˆæ¯', 
    description: 'å…è®¸éå¥½å‹ç”¨æˆ·å‘æ‚¨å‘é€æ¶ˆæ¯',
    enabled: true 
  }
])

// ç™»å½•ä¼šè¯
const loginSessions = ref([
  { 
    id: 1, 
    device: 'Windows Chrome æµè§ˆå™¨', 
    location: 'åŒ—äº¬, ä¸­å›½', 
    time: '2024-01-08 14:30', 
    current: true 
  },
  { 
    id: 2, 
    device: 'Android Chrome æµè§ˆå™¨', 
    location: 'åŒ—äº¬, ä¸­å›½', 
    time: '2024-01-07 20:15', 
    current: false 
  },
  { 
    id: 3, 
    device: 'iPhone Safari æµè§ˆå™¨', 
    location: 'ä¸Šæµ·, ä¸­å›½', 
    time: '2024-01-05 10:45', 
    current: false 
  }
])

// é€šçŸ¥è®¾ç½®
const notificationCategories = ref([
  {
    id: 'community',
    name: 'ç¤¾åŒºé€šçŸ¥',
    items: [
      { 
        id: 'postReply', 
        title: 'å¸–å­å›å¤', 
        description: 'å½“æœ‰äººå›å¤æ‚¨çš„å¸–å­æ—¶é€šçŸ¥æ‚¨',
        enabled: true 
      },
      { 
        id: 'commentReply', 
        title: 'è¯„è®ºå›å¤', 
        description: 'å½“æœ‰äººå›å¤æ‚¨çš„è¯„è®ºæ—¶é€šçŸ¥æ‚¨',
        enabled: true 
      },
      { 
        id: 'postLike', 
        title: 'å¸–å­ç‚¹èµ', 
        description: 'å½“æœ‰äººç‚¹èµæ‚¨çš„å¸–å­æ—¶é€šçŸ¥æ‚¨',
        enabled: true 
      },
      { 
        id: 'commentLike', 
        title: 'è¯„è®ºç‚¹èµ', 
        description: 'å½“æœ‰äººç‚¹èµæ‚¨çš„è¯„è®ºæ—¶é€šçŸ¥æ‚¨',
        enabled: false 
      }
    ]
  },
  {
    id: 'system',
    name: 'ç³»ç»Ÿé€šçŸ¥',
    items: [
      { 
        id: 'systemUpdate', 
        title: 'ç³»ç»Ÿæ›´æ–°', 
        description: 'ç³»ç»Ÿæ›´æ–°å’Œç»´æŠ¤é€šçŸ¥',
        enabled: true 
      },
      { 
        id: 'policyChange', 
        title: 'æ”¿ç­–å˜æ›´', 
        description: 'ç¤¾åŒºè§„åˆ™å’Œæ”¿ç­–å˜æ›´é€šçŸ¥',
        enabled: true 
      },
      { 
        id: 'securityAlert', 
        title: 'å®‰å…¨æé†’', 
        description: 'è´¦å·å®‰å…¨ç›¸å…³æé†’',
        enabled: true 
      }
    ]
  }
])
</script>